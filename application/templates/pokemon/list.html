{% extends "layout.html" %}

{% block body %}
<table>
  {% if not pokemon_list %}
    <p>No Pokémon in database</p>
  {% else %}
    <tr>
      <th>ID</th>
      <th>Name</th>
      <th>Gen</th>
      <th>Released</th>
    </tr>
    {% for pokemon in pokemon_list %}
    <tr>
      <td>{{ pokemon.id }}</td>
      <td>{{ pokemon.name }}</td>
      <td>{{ pokemon.generation }}</td>
      <td>{{ pokemon.released }}</td>
      {% if not pokemon.released %}
        <td>
          <form method="POST" action="{{ url_for('pokemon_release', pokemon_id=pokemon.id) }}">
            <input type="submit" value="Mark as released"/>
          </form>
        </td>
      {% endif %}
      {% if current_user.is_authenticated and current_user.admin %}
        <td>
          <form method="POST" action="{{ url_for('pokemon_delete', pokemon_id=pokemon.id) }}">
            <input type="submit" value="Delete Pokémon" />
          </form>
        </td>
        <td>
          <form method="GET" action="{{ url_for('pokemon_edit', pokemon_id=pokemon.id) }}">
            <input type="submit" value="Edit Pokémon" />
          </form>
        </td>
      {% endif %}
    </tr>
    {% endfor %}
  {% endif %}
</table>
{% endblock %}
